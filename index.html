<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Formul√°rio Moderno</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: #f0f2f5;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: start;
      padding-top: 30px;
      min-height: 100vh;
    }

    form {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      max-width: 500px;
      width: 90%;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    h2 {
      text-align: center;
      color: #333;
    }

    label {
      display: flex;
      flex-direction: column;
      font-size: 14px;
      color: #444;
    }

    input[type="text"],
    input[type="email"],
    input[type="date"],
    input[type="number"] {
      padding: 10px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 4px;
    }

    input[type="checkbox"] {
      transform: scale(1.2);
      margin-right: 8px;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 15px;
    }

    button {
      background-color: #25D366;
      color: white;
      font-size: 16px;
      padding: 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #1eb755;
    }

    @media (max-width: 500px) {
      form {
        padding: 15px;
      }
    }
  </style>
</head>
<body>

  <form id="formulario">
    <h2>Cadastro</h2>

    <label>Nome Completo:
      <input type="text" name="nome" required>
    </label>

    <label>CPF:
      <input type="text" name="cpf" id="cpf" required placeholder="Ex: 123.456.789-00">
    </label>

    <label>Data de Nascimento:
      <input type="date" name="data_nascimento" required>
    </label>

    <label>CEP:
      <input type="text" name="cep" id="cep" required placeholder="Ex: 01001-000">
    </label>

    <label>Rua:
      <input type="text" name="rua" id="rua" required readonly>
    </label>

    <label>Bairro:
      <input type="text" name="bairro" id="bairro" required>
    </label>

    <label>N√∫mero:
      <input type="text" name="numero" required>
    </label>

    <label>Complemento:
      <input type="text" name="complemento">
    </label>

    <label>E-mail:
      <input type="email" name="email" required>
    </label>

    <label>DDD:
      <input type="text" name="ddd" maxlength="2" required>
    </label>

    <label>Contato:
      <input type="text" name="contato" id="contato" required placeholder="Ex: 91234-5678">
    </label>

    <div class="checkbox-group">
      <label><input type="checkbox" name="esim" checked> eSIM</label>
      <label><input type="checkbox" name="portabilidade"> Portabilidade</label>
    </div>

    <button type="submit">Enviar para WhatsApp</button>
  </form>

  <script>
    function validarCPF(cpf) {
      cpf = cpf.replace(/[^\d]+/g,'');
      if (cpf === '' || cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;

      let soma = 0;
      for (let i = 0; i < 9; i++) soma += parseInt(cpf.charAt(i)) * (10 - i);
      let resto = 11 - (soma % 11);
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf.charAt(9))) return false;

      soma = 0;
      for (let i = 0; i < 10; i++) soma += parseInt(cpf.charAt(i)) * (11 - i);
      resto = 11 - (soma % 11);
      if (resto === 10 || resto === 11) resto = 0;
      return resto === parseInt(cpf.charAt(10));
    }

    $("#cep").on("blur", function() {
      var cep = $(this).val().replace(/\D/g, '');
      if (cep.length === 8) {
        $.getJSON("https://viacep.com.br/ws/" + cep + "/json/", function(dados) {
          if (!("erro" in dados)) {
            if (dados.logradouro) {
              $("#rua").val(dados.logradouro).prop('readonly', true);
            } else {
              $("#rua").val("").prop('readonly', false);
            }
            $("#bairro").val(dados.bairro);
          } else {
            alert("CEP n√£o encontrado.");
            $("#rua").val("").prop('readonly', false);
          }
        });
      }
    });

    $("#formulario").on("submit", function(e) {
      e.preventDefault();

      const cpf = $("#cpf").val();
      if (!validarCPF(cpf)) {
        alert("CPF inv√°lido!");
        return;
      }

      const dados = $(this).serializeArray();
      let mensagem = "üìù *Novo Cadastro:*\n";

      dados.forEach(item => {
        const label = item.name.charAt(0).toUpperCase() + item.name.slice(1).replace(/_/g, ' ');
        mensagem += `*${label}*: ${item.value}\n`;
      });

      const numero = "73982302994";
      const url = `https://wa.me/55${numero}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, "_blank");
    });
  </script>

</body>
</html>
